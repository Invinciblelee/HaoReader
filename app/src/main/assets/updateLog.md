## 更新日志
**2019/07/05**
*自动禁用已失效发现
*区分书源和发现开关

**2019/07/02**
*二维码书源分享失败自动转化txt文件分享

**2019/07/02**
*搜索最大线程数改为50个
*调整界面

**2019/06/28**
*微调界面，长按tab刷新

**2019/06/27**
*主界面大改版，发现书籍更便捷
*修复一些bug

**2019/05/27**
*修复某些书源发现分页异常
*增加正文标题显示和隐藏
*修复无法更换封面
*修复无法添加书签
*修复无法下载最后一章
*混合，CSS, XPATH使用##正则##替换
*注：长按加悬浮书架按钮可以更新书架。另外最近比较忙，其他功能延迟更新

**2019/05/19**
*修复一个导致音频嗅探失败的原因（例如喜马拉雅）
*加入分组搜索
*修复校验书源内存溢出崩溃
*下个版本：主题切换

**2019/05/17**
*修复一些可能导致内纯溢出的问题
*修复章节下一页规则只能读取一页的问题
*修复一个js处理url失败的问题

**2019/05/16**
*优化书架更新，解决卡顿
*添加Web写源功能，感谢：https://github.com/FoxNick/MyBookshelf-master

**2019/05/15**
*搜索线程最大数改为30
*有声小说换源后不再停止播放
*尝试解决一些内存溢出导致崩溃的bug
*修复一个目录一直加载的bug

**2019/05/13**
*修复目录只能读取一页
*优化目录分页，多线程请求，失败自动重试
*优化目录加载速度
*新增排除规则中的连接符号!!0:1:2，例如rule1||rule2||rule3!!0，会排除第一个||，只分割第二个；!!2(大于等于连接符号数)则直接不分割

**2019/05/12**
*可以开启以文件形式缓存章节列表(不开启则使用数据库)，当章节很多时，以文件形式缓存，读取速度上有一定的提升，注：如有问题，可关闭

**2019/05/11**
*修复对话框高度超出屏幕
*规则解析缓存添加开关，默认关闭，开启对一些复杂规则速度略有提升，含有get规则的开启可能会引起未知问题

**2019/05/10**
*修复一些bug
*书架按钮长按更新
*新增更新提醒标签
*规则缓存
*修复部分json格式判断失败
*网络请求数据缓存，只做了内存缓存

**2019/05/05**
*修复发现列表重复bug
*修复内置书源
*修复内置书源和外置716冲突
*优化动态内容获取流程

**2019/05/02**
*修改界面，统一颜色
*删除一些库，使用系统原生控件，精简安装包
*规则改动：
A.没有@put:规则，新增了一个规则rulePersistedVariables，写法{key:value,key:value}, @get:获取是一样的
B.新增一个规则outerBody代表根节点，适用于所有规则，例如目录列表用这个规则，可以把正文页当成一个目录章节
C.只能用&&，||，%%连接规则，旧版本&，|，%失效，例如rule1||^rule2||rule2#正则@js: ,规则前面加^表示rule2不共用正则和js规则，rule1和rule3会共用正则和js;
D.js规则，写法有：rule<js></js>(中间不能插入规则)<js></js> 或 rule@js: 或 全部写js；
E.另外还有写法，例如：rule1@js:ajax(result)@redirect:rule2  @redirect:重定向一个规则 js执行后会指向rule2，rule2的写法完全和普通规则一样，可以嵌套正则和js;
F.新增几个java调用方法(注：下面的规则不能用连接符号，只对字符串进行操作，不注入其他java对象)：
    1.parseResultContent(String source, String rule) source 内容，rule 规则 返回字符串
    2.parseResultUrl(String source, String rule) 返回字符串，会替换baseUrl
    3.parseResultContents(String source, String rule)返回字符串列表
    4.formatHtml(String string) 可以把html格式化为可阅读的内容
G.CSS可以用##match##replace 的方式使用正则表达式（注：所有规则均可使用正则表达式，并且必须放到最后面）
H.附一个完整写法：rule@js:jsRule#match#replace||rule<js>jsRule</js>#match#replace||@js:#match#replace||rule@js:jsRule#match#replace@redirect:rule2@js:jsRule#match#replace

**2019/04/30**
*修改界面
*支持混合书源ruleType : HYBRID; 支持css规则ruleType: CSS; 如果是单一规则建议指定类型，性能稍高于混合类型
*目录不再使用正则替换，大幅度加快解析速度
*使用代理模式实现边下边播，支持5.0以下版本，缓存路径YueDu/audios
*支持txt缓存提取(目前只能单线程)，提取路径YueDu/books

**2019/04/21**
* 听书功能上线（尚有不完善的地方），
* 书源bookType请选择AUDIO 
* ruleBookContent 变化， 四种情况：
     1.不写规则，表示目录url可直接播放
     2.和普通书源规则一样，表示可以在播放页面获取到播放链接
     3.$动态获取
     4.$$.mp4 播放页面嗅探mp4文件，进入播放页面自动播放（可其他后缀，可能有些格式不能播放）；

       需要点击播放按钮才能播放的情况：后面接@operate: + js
       方法一：
       $('#clickId').trigger("click");    'p' 标签选择器 ‘.class’ 类选择器 ‘#id’ id选择器
       方法二：
       var e = document.createEvent("MouseEvents");
       e.initEvent("click", true, true);
       document.getElementsByClassName("clickClass")[0].dispatchEvent(e);
       方法三：
       document.getElementById("clickId").click();

**2018/12/31**
* 支持最新版书源规则
* 添加一个书源规则rulePersistedVariables 和{key:value,key:value}用于保存变量 可用@get:{key}获取

**2018/12/31**
* 迁移到androidx
* 重新加上内置716，更名为Default716(用了json书源的换下源就行了)
* 修复一些bug
* 听书按钮隐藏

**2018/12/18**
* 重写analyzeRule代码（json和xpath都能使用#分割，正则替换）
* 去掉了内置716
* 修改书架切换样式
* 修改下拉刷新
* 书籍列表移除进度条
* 本地搜索bug修复
* 阅读标题加大字号（是阅读字体的1.2倍）
* 更换多个图标
* 有声书（写了部分逻辑，暂时没时间完善）
* 多处细节优化

**2018/11/26**
* 修改SnackBar颜色
* 发现按拼音排序
* bug修复

**2018/11/25**
* 重写文件选择器
* 优化搜索速度
* 多处bug修复

**2018/11/19**
* 修改动画，解决详情界面跳转到阅读界面没有动画的问题
* 优化本地导入界面，文件夹扫描改为异步
* 修改本地封面选择更加方便
* 加入一个搜索分页规则{index（第一页）, indexSecond（第二页）, indexThird（第三页）, index-searchPage+1 或 index-searchPage-1 或 index-searchPage}  
* 修复背景被回收的bug

**2018/11/18**
* 优化搜索，解决searchView莫名其妙获取焦点(Android8.0)
* 调整字体大小
* 优化布局，减少布局层数
* 修改搜索历史流式布局，解决内容太长显示不全的问题
* 调整电量图标，解决修改字体后无法对齐问题
* 全局颜色统一，方便加入主题功能
* 其他bug修复

**2018/11/15**
* 增加书源导入(txt, json, xml)，背景图片选择界面
* 增加编码设置
* 界面调整
* bug修复

**2018/11/12**
* 优化ReadActivity启动速度
* 加入翻页动画速度调整

**2018/11/08**
* bug修复
* 布局优化
* 修改界面条装动画
* 首页书架改为fragment切换
* 修复状态栏不显示大图标问题

**2018/10/23**
* 初步实现epub阅读（暂时去掉，优化中）

**2018/10/22**
* 修改章节缓存超时时间
* 增加ajax获取动态内容失败回调
* 修改静态为单例模式
* 文本选中菜单增加分享进入搜索页面

**2018/10/20**
* 阅读界面改版

**2018/10/16**
* 修复没加入书架章节无法缓存读取
* 换源后目录更新

**2018/10/15**
* 目录倒序
* 目录页新增更新
* 搜索优化（分页修复）
* 阅读排版优化（解决更换某些字体后，文字和电池对不齐）
* 统一界面风格

**2018/10/14**
* 搜索排序优化(去掉一些重复的结果)
* 下载优化
* bug修复

**2018/10/13**
* 调整主题
* 优化阅读界面导航栏隐藏和显示，兼容全面屏

**2018/10/08**
* 修复音量翻页开关
* 合并 https://github.com/atbest　提交的代码

**2018/10/03**
* 添加朗读时音量翻页开关
* 关闭滚动模式的惯性滚动
* 更新前先删除原有目录,看能不能解决双目录问题

**2018/10/02**
* 添加更新检查,可直接下载最新版本
* 朗读时自动关闭音量翻页
* 修复部分书源无法读取编码格式，导致加载失败
* 修复一些BUG

**2018/10/01**
* 添加一个自动翻页倒计时条
* 本地导入书源可以选择.json文件(文件选择没改)
* 修复一些BUG

**2018/09/29**
* 修复一些BUG

**2018/09/26**
* 为当前使用的字体添加标志
* 阅读界面菜单添加禁用书源
* 其它一些优化

**2018/09/25**
* 其它一些优化和BUG修复
* 感谢　https://github.com/atbest　提交的代码

**2018/09/23**
* 修复下载时线程过多导致的崩溃
* 修复无网络一直加载的问题

**2018/09/21**
* 修复一些BUG
* 书源管理添加选择分组功能

**2018/09/20**
* 优化html取值

**2018/09/19**
* 修复一些BUG
* 取值规则添加&分隔符,合并所有取值
* 取值规则添加children,获取所有子标签
* 取值规则添加html,获取所有文本

**2018/09/17**
* 解决更换字体时文字有可能不对齐的问题

**2018/09/14**
* 添加内容分页获取规则

**2018/09/13**
* 内容可以用TalkBack朗读
* 修复一个BUG,String input must not be null

**2018/09/12**
* 替换添加作用于,可填写书名和书源url,不填应用到所有

**2018/09/10**
* 修复搜索时卡顿
* 添加直接打开最近阅读设置

**2018/09/07**
* 添加本地时点路径可以选择SD卡

**2018/09/06**
* 点击作者会搜索作者
* 修复切换手动排序长按封面可能不出书籍信息的BUG
* 其它一些优化

**2018/09/04**
* 添加自定义封面

**2018/08/31**
* 添加自动翻页功能

**2018/08/29**
* 尝试修复选择图片背景闪退问题
* 尝试修复搜索闪退问题

**2018/08/27**
* 去除了获取内容时的空格替换
* 搜索添加停止按钮
* 修复一些bug

**2018/08/23**
* 修复了本地书籍双目录的bug
* 其它一些修复

**2018/08/20**
* 添加段距调整
* 修复bug
* 无动画时手指拿起才会翻页

**2018/08/14**
* 背景图不再放到缓存,背景图经过处理减少卡顿
* 备份可以备份设置,备份文件夹改变为YueDu

**2018/08/14**
* 更改了选择字体的方式
* 修复一些BUG

**2018/08/13**
* 优化启动速度,启动时不读取详细目录
* 修复一些BUG

**2018/08/09**
* 优化修复bug

**2018/08/09**
* 修改书架界面
* 修改本地导入界面
* 修复BUG

**2018/08/08**
* 修复BUG,本地书籍乱码,点击翻页选项无效等问题

**2018/08/06**
* 重写阅读界面代码,实现多种翻页模式
